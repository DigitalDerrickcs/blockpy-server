{% extends 'helpers/layout.html' %}
{% import 'helpers/navigation.html' as navigation %}

{% block title %}
Watch Events
{% endblock %}

{% block statusbar %}
{% endblock %}

{% block extrahead %}

<script type='text/javascript'>

    function getLocalStorage(key, defaultValue) {
        let value = localStorage.getItem(key);
        if (value === null) {
            return defaultValue;
        } else {
            return value;
        }
    }

    $(function() {
        let userIds = {{  request.values.get('user_ids')|tojson }} || getLocalStorage("BLOCKPY_SERVER_USERIDS", "");
        let assignmentIds = {{  request.values.get('assignment_ids')|tojson }} || getLocalStorage("BLOCKPY_SERVER_ASSIGNMENTIDS", "first");
        console.log(userIds, assignmentIds);
        ko.applyBindings({
            pageCourseId: {{ course_id|tojson }},
            userIds: userIds,
            assignmentIds: assignmentIds
        });
    });

</script>
{% endblock %}

{% block body %}

    <h1>Watch Events</h1>
    {{ navigation.navigate_course() }}

    <watcher params="courseId: pageCourseId, assignmentIds: assignmentIds, userIds: userIds"></watcher>


{% endblock %}